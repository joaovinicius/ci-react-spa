import{j as e,a as i,r as E,l as P,t as D,u as V,I as d,B as y,s as w}from"./index-CBzID-ur.js";import{u as _,a as k,L as u}from"./label-CIjJRXaR.js";function S({className:s,...r}){return e.jsxDEV("div",{"data-slot":"card",className:i("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...r},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/ui/card.tsx",lineNumber:7,columnNumber:5},this)}function C({className:s,...r}){return e.jsxDEV("div",{"data-slot":"card-header",className:i("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...r},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/ui/card.tsx",lineNumber:20,columnNumber:5},this)}function L({className:s,...r}){return e.jsxDEV("div",{"data-slot":"card-title",className:i("leading-none font-semibold",s),...r},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/ui/card.tsx",lineNumber:33,columnNumber:5},this)}function F({className:s,...r}){return e.jsxDEV("div",{"data-slot":"card-description",className:i("text-muted-foreground text-sm",s),...r},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/ui/card.tsx",lineNumber:43,columnNumber:5},this)}function T({className:s,...r}){return e.jsxDEV("div",{"data-slot":"card-content",className:i("px-6",s),...r},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/ui/card.tsx",lineNumber:66,columnNumber:5},this)}const A=s=>s!==null&&"access_token"in s&&"refresh_token"in s&&"token_type"in s&&"expires_in"in s&&"user"in s;function R(){const[s,r]=E.useState(""),f=P(),{setAccessToken:p,setRefreshToken:N,setTokenType:h,setExpiresIn:j,setUser:x}=D(),{mutate:v,isPending:c}=V.useMutation("post","/auth/login",void 0,{onSuccess:o=>{A(o)&&(p(o.access_token),N(o.refresh_token),h(o.token_type),j(o.expires_in),x(o.user),f("/admin"))},onError:o=>{var m,l;if(console.error(o),o&&typeof o=="object"&&"cause"in o){const n=o.cause;if(((m=n==null?void 0:n.response)==null?void 0:m.status)===401){r("Invalid credentials");return}if(((l=n==null?void 0:n.response)==null?void 0:l.status)>=500){r("Server error. Please try again later.");return}}if(o&&typeof o=="object"&&"message"in o){r(o.message);return}r("An error occurred. Please try again.")}}),{register:a,handleSubmit:b,formState:{errors:t}}=_({resolver:k(w.verifyUserPassword_Body)}),g=o=>{r(""),v(o)};return e.jsxDEV(S,{children:[e.jsxDEV(C,{children:[e.jsxDEV(L,{children:"Login to your account"},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:93,columnNumber:9},this),e.jsxDEV(F,{children:"Enter your email below to login to your account"},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:94,columnNumber:9},this)]},void 0,!0,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:92,columnNumber:7},this),e.jsxDEV(T,{children:e.jsxDEV("form",{onSubmit:b(g),children:e.jsxDEV("div",{className:"flex flex-col gap-6",children:[e.jsxDEV("div",{className:"grid gap-3",children:[e.jsxDEV(u,{htmlFor:"email",children:"Email"},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:104,columnNumber:15},this),e.jsxDEV(d,{id:"email",type:"email",placeholder:"m@example.com",...a("email"),"aria-invalid":!!t.email},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:105,columnNumber:15},this),t.email&&e.jsxDEV("p",{className:"text-sm text-red-500",children:t.email.message},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:113,columnNumber:17},this)]},void 0,!0,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:103,columnNumber:13},this),e.jsxDEV("div",{className:"grid gap-3",children:[e.jsxDEV("div",{className:"flex items-center",children:[e.jsxDEV(u,{htmlFor:"password",children:"Password"},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:120,columnNumber:17},this),e.jsxDEV("a",{href:"#",className:"ml-auto inline-block text-sm underline-offset-4 hover:underline",children:"Forgot your password?"},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:121,columnNumber:17},this)]},void 0,!0,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:119,columnNumber:15},this),e.jsxDEV(d,{id:"password",type:"password",placeholder:"Enter your password",...a("password"),"aria-invalid":!!t.password},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:128,columnNumber:15},this),t.password&&e.jsxDEV("p",{className:"text-sm text-red-500",children:t.password.message},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:136,columnNumber:17},this)]},void 0,!0,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:118,columnNumber:13},this),s&&e.jsxDEV("div",{className:"text-sm text-red-500 text-center",children:s},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:142,columnNumber:15},this),e.jsxDEV("div",{className:"flex flex-col gap-3",children:e.jsxDEV(y,{type:"submit",className:"w-full",disabled:c,children:c?"Logging in...":"Login"},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:149,columnNumber:15},this)},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:148,columnNumber:13},this)]},void 0,!0,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:100,columnNumber:11},this)},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:99,columnNumber:9},this)},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:98,columnNumber:7},this)]},void 0,!0,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/login-form.tsx",lineNumber:91,columnNumber:5},this)}export{R as L};
