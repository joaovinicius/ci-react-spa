import{c as G,r as u,d as x,e as K,P as X,f as y,g as J,h as S,i as w,k as Q,j as e,a as W,l as A,b as F,m as Y,u as Z,I as k,A as ee,B as R,s as re}from"./index-mY46qgd_.js";import{u as se,a as oe,L as E,C as te}from"./label-Bh3tKdp0.js";import{D as ne,a as ce,b as ie,c as ae,e as me}from"./dialog-Chuv6-jk.js";/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],de=G("check",le);function ue(r){const t=u.useRef({value:r,previous:r});return u.useMemo(()=>(t.current.value!==r&&(t.current.previous=t.current.value,t.current.value=r),t.current.previous),[r])}var D="Checkbox",[fe,ge]=K(D),[pe,_]=fe(D);function he(r){const{__scopeCheckbox:t,checked:l,children:i,defaultChecked:a,disabled:o,form:p,name:h,onCheckedChange:b,required:N,value:v="on",internal_do_not_use_render:f}=r,[n,s]=J({prop:l,defaultProp:a??!1,onChange:b,caller:D}),[j,g]=u.useState(null),[m,d]=u.useState(null),c=u.useRef(!1),C=j?!!p||!!j.closest("form"):!0,V={checked:n,disabled:o,setChecked:s,control:j,setControl:g,name:h,form:p,value:v,hasConsumerStoppedPropagationRef:c,required:N,defaultChecked:P(a)?!1:a,isFormControl:C,bubbleInput:m,setBubbleInput:d};return x.jsx(pe,{scope:t,...V,children:be(f)?f(V):i})}var B="CheckboxTrigger",M=u.forwardRef(({__scopeCheckbox:r,onKeyDown:t,onClick:l,...i},a)=>{const{control:o,value:p,disabled:h,checked:b,required:N,setControl:v,setChecked:f,hasConsumerStoppedPropagationRef:n,isFormControl:s,bubbleInput:j}=_(B,r),g=S(a,v),m=u.useRef(b);return u.useEffect(()=>{const d=o==null?void 0:o.form;if(d){const c=()=>f(m.current);return d.addEventListener("reset",c),()=>d.removeEventListener("reset",c)}},[o,f]),x.jsx(y.button,{type:"button",role:"checkbox","aria-checked":P(b)?"mixed":b,"aria-required":N,"data-state":z(b),"data-disabled":h?"":void 0,disabled:h,value:p,...i,ref:g,onKeyDown:w(t,d=>{d.key==="Enter"&&d.preventDefault()}),onClick:w(l,d=>{f(c=>P(c)?!0:!c),j&&s&&(n.current=d.isPropagationStopped(),n.current||d.stopPropagation())})})});M.displayName=B;var O=u.forwardRef((r,t)=>{const{__scopeCheckbox:l,name:i,checked:a,defaultChecked:o,required:p,disabled:h,value:b,onCheckedChange:N,form:v,...f}=r;return x.jsx(he,{__scopeCheckbox:l,checked:a,defaultChecked:o,disabled:h,required:p,onCheckedChange:N,name:i,form:v,value:b,internal_do_not_use_render:({isFormControl:n})=>x.jsxs(x.Fragment,{children:[x.jsx(M,{...f,ref:t,__scopeCheckbox:l}),n&&x.jsx(q,{__scopeCheckbox:l})]})})});O.displayName=D;var T="CheckboxIndicator",L=u.forwardRef((r,t)=>{const{__scopeCheckbox:l,forceMount:i,...a}=r,o=_(T,l);return x.jsx(X,{present:i||P(o.checked)||o.checked===!0,children:x.jsx(y.span,{"data-state":z(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...r.style}})})});L.displayName=T;var U="CheckboxBubbleInput",q=u.forwardRef(({__scopeCheckbox:r,...t},l)=>{const{control:i,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:p,required:h,disabled:b,name:N,value:v,form:f,bubbleInput:n,setBubbleInput:s}=_(U,r),j=S(l,s),g=ue(o),m=Q(i);u.useEffect(()=>{const c=n;if(!c)return;const C=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(C,"checked").set,$=!a.current;if(g!==o&&I){const H=new Event("click",{bubbles:$});c.indeterminate=P(o),I.call(c,P(o)?!1:o),c.dispatchEvent(H)}},[n,g,o,a]);const d=u.useRef(P(o)?!1:o);return x.jsx(y.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??d.current,required:h,disabled:b,name:N,value:v,form:f,...t,tabIndex:-1,ref:j,style:{...t.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});q.displayName=U;function be(r){return typeof r=="function"}function P(r){return r==="indeterminate"}function z(r){return P(r)?"indeterminate":r?"checked":"unchecked"}function xe({className:r,...t}){return e.jsxDEV(O,{"data-slot":"checkbox",className:W("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...t,children:e.jsxDEV(L,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsxDEV(de,{className:"size-3.5"},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/ui/checkbox.tsx",lineNumber:24,columnNumber:9},this)},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/ui/checkbox.tsx",lineNumber:20,columnNumber:7},this)},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/ui/checkbox.tsx",lineNumber:12,columnNumber:5},this)}function Ee({initialData:r,onSuccess:t}){const[l,i]=u.useState(""),a=A(),o=F(),{invalidate:p}=Y(),h={email:"",name:"",password:"",phone:null,bio:null,email_verified:!1,org_id:void 0,tenant_id:void 0,role:[],...r},b=r!=null&&r.id?"/users/:id":"/users",N=r!=null&&r.id?"put":"post",{mutate:v,isPending:f}=Z.useMutation(N,b,r!=null&&r.id?{params:{id:r==null?void 0:r.id}}:void 0,{onSuccess:()=>{p(),a(`/admin/${o.tenantId}/user`),t&&t()},onError:m=>{i(m.message||"Failed to submit user form")}}),n=se({resolver:oe(re.UserInput),defaultValues:h}),{formState:{errors:s}}=n,j=m=>{i(""),v(m)},g=()=>{i(""),a(`/admin/${o.tenantId}/category`)};return e.jsxDEV("form",{onSubmit:n.handleSubmit(j),className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV(E,{htmlFor:"email",children:"Email"},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:89,columnNumber:9},this),e.jsxDEV(k,{id:"email",type:"email",placeholder:"user@example.com",...n.register("email"),"aria-invalid":!!s.email},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:90,columnNumber:9},this),s.email&&e.jsxDEV("p",{className:"text-sm text-red-500",children:s.email.message},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:98,columnNumber:11},this)]},void 0,!0,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:88,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(E,{htmlFor:"name",children:"Name"},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:103,columnNumber:9},this),e.jsxDEV(k,{id:"name",type:"text",placeholder:"John Doe",...n.register("name"),"aria-invalid":!!s.name},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:104,columnNumber:9},this),s.name&&e.jsxDEV("p",{className:"text-sm text-red-500",children:s.name.message},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:112,columnNumber:11},this)]},void 0,!0,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:102,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(E,{htmlFor:"password",children:"Password"},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:118,columnNumber:9},this),e.jsxDEV(k,{id:"password",type:"password",placeholder:"•••••••",...n.register("password"),"aria-invalid":!!s.password},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:119,columnNumber:9},this),s.password&&e.jsxDEV("p",{className:"text-sm text-red-500",children:s.password.message},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:127,columnNumber:11},this)]},void 0,!0,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:117,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(E,{htmlFor:"phone",children:"Phone (optional)"},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:132,columnNumber:9},this),e.jsxDEV(k,{id:"phone",type:"text",placeholder:"(555) 123-4567",...n.register("phone"),"aria-invalid":!!s.phone},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:133,columnNumber:9},this),s.phone&&e.jsxDEV("p",{className:"text-sm text-red-500",children:s.phone.message},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:141,columnNumber:11},this)]},void 0,!0,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:131,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(E,{htmlFor:"bio",children:"Bio (optional)"},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:146,columnNumber:9},this),e.jsxDEV(k,{id:"bio",type:"text",placeholder:"Short personal bio",...n.register("bio"),"aria-invalid":!!s.bio},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:147,columnNumber:9},this),s.bio&&e.jsxDEV("p",{className:"text-sm text-red-500",children:s.bio.message},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:155,columnNumber:11},this)]},void 0,!0,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:145,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(E,{htmlFor:"org_id",children:"Organization ID (optional)"},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:160,columnNumber:9},this),e.jsxDEV(k,{id:"org_id",type:"number",...n.register("org_id",{valueAsNumber:!0}),"aria-invalid":!!s.org_id},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:161,columnNumber:9},this),s.org_id&&e.jsxDEV("p",{className:"text-sm text-red-500",children:s.org_id.message},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:168,columnNumber:11},this)]},void 0,!0,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:159,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(E,{htmlFor:"tenant_id",children:"Tenant ID (optional)"},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:173,columnNumber:9},this),e.jsxDEV(k,{id:"tenant_id",type:"number",...n.register("tenant_id",{valueAsNumber:!0}),"aria-invalid":!!s.tenant_id},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:174,columnNumber:9},this),s.tenant_id&&e.jsxDEV("p",{className:"text-sm text-red-500",children:s.tenant_id.message},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:181,columnNumber:11},this)]},void 0,!0,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:172,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex flex-wrap gap-4",children:ee.map(m=>e.jsxDEV(te,{control:n.control,name:"role",render:({field:{onChange:d,value:c}})=>e.jsxDEV("div",{className:"flex flex-row items-center gap-2",children:[e.jsxDEV(xe,{id:m,checked:Array.isArray(c)&&c.includes(m),onCheckedChange:C=>{d(C?[...Array.isArray(c)?c:[],m]:(Array.isArray(c)?c:[]).filter(V=>V!==m))}},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:194,columnNumber:19},this),e.jsxDEV(E,{htmlFor:m,children:m},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:209,columnNumber:19},this)]},void 0,!0,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:193,columnNumber:17},this)},m,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:188,columnNumber:13},this))},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:186,columnNumber:9},this),s.tenant_id&&e.jsxDEV("p",{className:"text-sm text-red-500",children:s.tenant_id.message},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:217,columnNumber:11},this)]},void 0,!0,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:185,columnNumber:7},this),l&&e.jsxDEV("div",{className:"text-center text-sm text-red-500",children:l},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:223,columnNumber:9},this),e.jsxDEV("div",{className:"flex justify-end gap-2",children:[e.jsxDEV(R,{variant:"outline",type:"button",onClick:g,children:"Cancel"},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:229,columnNumber:9},this),e.jsxDEV(R,{type:"submit",disabled:f,children:f?"Saving...":"Save User"},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:232,columnNumber:9},this)]},void 0,!0,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:228,columnNumber:7},this)]},void 0,!0,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/user-form.tsx",lineNumber:87,columnNumber:5},this)}function Pe({title:r,children:t,redirect:l,fullScreen:i}){const a=A(),o=F(),p=h=>{h||a(`/admin/${o.tenantId}/${l}`)};return e.jsxDEV(ne,{defaultOpen:!0,onOpenChange:p,children:e.jsxDEV(ce,{className:i?"min-w-screen min-h-screen m-0 p-0 [&>button]:hidden":"sm:max-w-[425px]",children:[e.jsxDEV(ie,{className:i?"hidden":"",children:[e.jsxDEV(ae,{children:r},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/page-modal.tsx",lineNumber:29,columnNumber:11},this),e.jsxDEV(me,{className:"hidden",children:r},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/page-modal.tsx",lineNumber:30,columnNumber:11},this)]},void 0,!0,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/page-modal.tsx",lineNumber:28,columnNumber:9},this),i?t:e.jsxDEV("div",{className:"grid gap-4",children:t},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/page-modal.tsx",lineNumber:33,columnNumber:35},this)]},void 0,!0,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/page-modal.tsx",lineNumber:21,columnNumber:7},this)},void 0,!1,{fileName:"/home/jv/Projects/ci-react-spa/src/frontend/components/page-modal.tsx",lineNumber:20,columnNumber:5},this)}export{Pe as P,Ee as U};
